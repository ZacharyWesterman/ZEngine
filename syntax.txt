index		: [ boolexpr ]

indexlist	: index index
		| indexlist index

exprlist	: boolexpr , boolexpr
		| exprlist , boolexpr

list		: { }
		| { boolexpr }
		| { exprlist }

type_funccall	: IDENTIFIER . user_funccall

funccall	: IDENTIFIER ( )
		| IDENTIFIER ( boolexpr )
		| IDENTIFIER ( exprlist )

varindex	: IDENTIFIER indexlist
		| IDENTIFIER index

typevar		: IDENTIFIER . IDENTIFIER ![ !(
		| IDENTIFIER . varindex

typefunccall	: IDENTIFIER . IDENTIFIER arglist

variable	: IDENTIFIER !( ![ !.
		| varindex
		| typevar

operand		: variable
		| NUMERIC_LITERAL
		| COMPLEX_LITERAL
		| STRING_LITERAL
		| type_funccall
		| funccall
		| list

parenthexpr	: !IDENTIFIER ( boolexpr )
		| operand

factorialexpr	: parenthexpr !
		| parenthexpr

negatexpr	: - factorialexpr
		| factorialexpr

powerexpr	: negatexpr ^ negatexpr
		| negatexpr

multiplyexpr	: powerexpr *  powerexpr
		| powerexpr /  powerexpr
		| powerexpr // powerexpr
		| powerexpr %  powerexpr
		| powerexpr

addexpr		: multiplyexpr + multiplyexpr
		| multiplyexpr - multiplyexpr
		| multiplyexpr

boolexpr	: "not" addexpr
		| addexpr "and"  addexpr
		| addexpr "or"   addexpr
		| addexpr "xor"  addexpr
		| addexpr "nand" addexpr
		| addexpr "nor"  addexpr
		| addexpr "xnor"  addexpr
		| ~ addexpr
		| addexpr &  addexpr
		| addexpr |  addexpr
		| addexpr :  addexpr
		| addexpr ~& addexpr
		| addexpr ~| addexpr
		| addexpr ~: addexpr
		| addexpr

assignexpr	: var = boolexpr

generalexpr	: assignexpr
		| boolexpr

identifierlist	: IDENTIFIER IDENTIFIER !;
		| commandphrase IDENTIFIER

command		: IDENTIFIER list ;
		: identifierlist list ;

statementlist	: statement statement
		| statementlist statement

variable_decl	: IDENTIFIER ;

typevar_decl	: IDENTIFIER IDENTIFIER ;

statement	: generalexpr ;
		| command ;
		| if_statement
		| else_statement
		| for_statement
		| foreach_statement
		| loop_statement
		| while_pre_stmt
		| while_post_stmt
		| run_statement
		| typevar_decl
		| variable_decl
		| return_statement

if_statement	: "if" ( boolexpr ) statement
		| "if" ( boolexpr ) { statement }
		| "if" ( boolexpr ) { statementlist }
		| "if" ( boolexpr ) { }
		| "if" ( boolexpr ) ;

else_statement	: "else" statement
		| "else" { statement }
		| "else" { statementlist }
		| "else" { }
		| "else" ;

for_statement	: "for" ( assignexpr ; boolexpr ; assignexpr ) statement
		| "for" ( assignexpr ; boolexpr ; assignexpr ) { statement }
		| "for" ( assignexpr ; boolexpr ; assignexpr ) { statementlist }
		| "for" ( assignexpr ; boolexpr ; assignexpr ) { }
		| "for" ( assignexpr ; boolexpr ; assignexpr ) ;

foreach_statement:"for" "each" variable "in" variable statement
		| "for" "each" variable "in" variable { statement }
		| "for" "each" variable "in" variable { statementlist }
		| "for" "each" variable "in" variable { }
		| "for" "each" variable "in" variable ;

loop_statement	: "loop" statement
		| "loop" { statement }
		| "loop" { statementlist }
		| "loop" { }
		| "loop" ;

while_pre_stmt	: "loop" "while" ( boolexpr ) statement
		| "loop" "while" ( boolexpr ) { statement }
		| "loop" "while" ( boolexpr ) { statementlist }
		| "loop" "while" ( boolexpr ) { }
		| "loop" "while" ( boolexpr ) ;

while_post_stmt	: "loop" statement "while" ( boolexpr )
		| "loop" { statement } "while" ( boolexpr )
		| "loop" { statementlist } "while" ( boolexpr )
		| "loop" { } "while" ( boolexpr )
		| "loop" ; "while" ( boolexpr )

run_statement	: "run" boolexpr ;

return_statement: "return" variable ;

declaration	: typedecl
		| externaldecl
		| typevar_decl
		| variable_decl

decllist	: declaration declaration
		| decllist declaration
		| declaration

typedecl	: "type" IDENTIFIER { decllist }

globaldecl	: "global" assignexpr ;
		| "global" variable ;

externaldecl	: "external" variable ;

formaldecl	: ( IDENTIFIER , IDENTIFIER
		| formaldecl , IDENTIFIER

function_decl	: IDENTIFIER (  ) { decllist }
		| IDENTIFIER ( IDENTIFIER ) { decllist }
		| IDENTIFIER formaldecl ) { decllist }

